

  Stockfetch tests
    ✓ canary
    ✓ read invokes an error handler if the file is invalid
    ✓ read invokes processTickers if the file is valid
    ✓ read an empty file
    ✓ parseTickers returns tickers
    ✓ parseTickers returns empty array for empty content
    ✓ parseTickers returns empty array for white-space
    ✓ parseTickers ignores unexpected format in content
    ✓ processTickers calls getPrice for each ticker symbol
    ✓ processTickers saves tickers count
    ✓ getPrice calls get on http with valid URL
    ✓ getPrice calls get with a response handler as argument
    ✓ getPrice registers handler for failure to reach host
    ✓ processResponse calls parsePrice with valid data
    ✓ processResponse calls processError if response failed
    ✓ processResponse calls processError only if response failed
    ✓ processHttpError calls processError with error details
    ✓ parsePrice updates prices
    ✓ parsePrice calls printReport
    ✓ processError udaptes errors
    ✓ processError calls printReport
    ✓ printReport sends price, errors once all responses arrive
    ✓ printReport does not send before all responses arrive
    ✓ printReport calls sortData once for prices, once for errors
    ✓ sortData sorts the data based on the symbols
    ✓ getPriceForTickers with invalid file
    ✓ getPriceForTickers with a valid file (883ms)


  27 passing (923ms)

